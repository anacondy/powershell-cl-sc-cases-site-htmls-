<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="Landmark Supreme Court case from India - Ramsey's Legal Archive">
    <meta name="theme-color" content="#f0f2f5">
    <title>Site Analytics - Ramsey's Legal Archive</title>
    
    <!-- Preconnect to external resources for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body { opacity: 0; transition: opacity 0.3s ease-in-out; }
        body.loaded { opacity: 1; }
        
        .analytics-container {
            text-align: center;
            padding: 40px 0;
        }
        
        .analytics-title {
            font-size: 3em;
            color: var(--heading-color);
            margin-bottom: 50px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }
        
        .metric-card {
            background-color: var(--section-bg-blend);
            border-radius: 12px;
            padding: 30px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            will-change: transform, box-shadow;
        }
        
        .metric-label {
            font-size: 1.3em;
            color: var(--meta-color);
            margin-bottom: 15px;
        }
        
        .metric-value {
            font-size: 3.5em;
            font-weight: 700;
            color: var(--link-color);
            line-height: 1;
        }
        
        .device-info {
            margin-top: 40px;
            padding: 30px;
            background-color: var(--section-bg-blend);
            border-radius: 12px;
        }
        
        .device-title {
            font-size: 2em;
            color: var(--heading-color);
            margin-bottom: 20px;
        }
        
        .device-display {
            font-size: 4em;
            margin: 20px 0;
        }
        
        .device-name {
            font-size: 1.5em;
            color: var(--text-color);
        }
        
        .rating-section {
            margin-top: 60px;
            padding: 40px;
            background-color: var(--section-bg-blend);
            border-radius: 12px;
        }
        
        .rating-title {
            font-size: 2em;
            color: var(--heading-color);
            margin-bottom: 30px;
        }
        
        .stars-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .star {
            font-size: 4em;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            filter: grayscale(100%);
            opacity: 0.3;
            will-change: filter, opacity, transform;
        }
        
        .star:hover,
        .star.active {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.2) rotate(10deg);
        }
        
        .star.active {
            animation: starPulse 0.5s ease;
        }
        
        @keyframes starPulse {
            0%, 100% { transform: scale(1.2) rotate(0deg); }
            50% { transform: scale(1.4) rotate(15deg); }
        }
        
        .quote-section {
            margin-top: 50px;
            padding: 40px;
            font-style: italic;
            font-size: 1.5em;
            color: var(--text-color);
            line-height: 1.8;
        }
        
        .legal-disclaimer-section {
            margin-top: 50px;
            padding: 40px;
            text-align: left;
        }
        
        .disclaimer-heading {
            font-size: 2.5em;
            color: var(--heading-color);
            margin-bottom: 20px;
        }
        
        .disclaimer-heading .v-red {
            color: #DC143C;
            font-size: 1.2em;
        }
        
        .disclaimer-subtext {
            font-size: 1.3em;
            color: var(--meta-color);
            font-style: italic;
            line-height: 1.8;
        }
        
        /* Mobile responsive styles for analytics page */
        @media screen and (max-width: 768px) {
            .analytics-title {
                font-size: 2em;
                margin-bottom: 30px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr; /* Single column on mobile */
                gap: 20px;
                margin-bottom: 40px;
            }
            
            .metric-card {
                padding: 20px;
            }
            
            .metric-label {
                font-size: 1.1em;
            }
            
            .metric-value {
                font-size: 2.5em;
            }
            
            .device-info {
                padding: 20px;
                margin-top: 30px;
            }
            
            .device-title {
                font-size: 1.5em;
            }
            
            .device-display {
                font-size: 3em;
            }
            
            .device-name {
                font-size: 1.2em;
            }
            
            .rating-section {
                padding: 25px;
                margin-top: 40px;
            }
            
            .rating-title {
                font-size: 1.5em;
            }
            
            .stars-container {
                gap: 10px;
            }
            
            .star {
                font-size: 2.5em;
            }
            
            .quote-section {
                padding: 25px;
                font-size: 1.1em;
                margin-top: 35px;
            }
            
            .legal-disclaimer-section {
                padding: 25px;
                margin-top: 35px;
            }
            
            .disclaimer-heading {
                font-size: 1.6em;
            }
            
            .disclaimer-subtext {
                font-size: 0.95em;
            }
        }
        
        @media screen and (max-width: 400px) {
            .analytics-title {
                font-size: 1.6em;
            }
            
            .metric-value {
                font-size: 2em;
            }
            
            .star {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>

    <div class="mock-nav">
        <div class="left-section">
            <span class="nav-icon" onclick="history.back()">&lt;</span>
            <span class="nav-icon" onclick="history.forward()">&gt;</span>
            <span class="nav-icon" onclick="location.reload()">&#x21bb;</span>
        </div>
        <div class="center-text">Ramsey</div>
        <div class="right-section">
            <div class="theme-toggle-wrapper">
                <label class="theme-toggle">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span>‚òÄÔ∏è/üåô</span>
            </div>
            <span class="nav-icon" onclick="window.location.href='about.html'">&#x2630;</span>
            <span class="nav-icon" onclick="window.location.href='index.html'">&#x2716;</span>
        </div>
    </div>

    <div class="container">
        <div class="content-card">
            <div class="analytics-container">
                <h1 class="analytics-title">Site Analytics</h1>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Today's Visitors</div>
                        <div class="metric-value" id="today-visitors">0</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Yesterday's Visitors</div>
                        <div class="metric-value" id="yesterday-visitors">0</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">This Month</div>
                        <div class="metric-value" id="month-visitors">0</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Last Month</div>
                        <div class="metric-value" id="last-month-visitors">0</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">New Visitors</div>
                        <div class="metric-value" id="new-visitors">0</div>
                    </div>
                </div>
                
                <div class="device-info">
                    <h2 class="device-title">Your Device</h2>
                    <div class="device-display" id="device-icon">üñ•Ô∏è</div>
                    <div class="device-name" id="device-name">Desktop</div>
                </div>
                
                <div class="rating-section">
                    <h2 class="rating-title">Rate Your Experience</h2>
                    <div class="stars-container" id="stars-container">
                        <span class="star" data-rating="1">‚≠ê</span>
                        <span class="star" data-rating="2">‚≠ê</span>
                        <span class="star" data-rating="3">‚≠ê</span>
                        <span class="star" data-rating="4">‚≠ê</span>
                        <span class="star" data-rating="5">‚≠ê</span>
                    </div>
                    <div id="rating-message" style="font-size: 1.2em; color: var(--link-color); margin-top: 20px;"></div>
                </div>
                
                <div class="quote-section">
                    <p>"I wrote you 365 letters. I wrote you everyday for a year."</p>
                    <p>"It wasn't over, it still isn't over!"</p>
                    <p style="margin-top: 30px; font-size: 0.9em; font-style: normal; color: var(--meta-color);">
                        ‚Äî Puppy pilot & anacondy, inspired by The Notebook
                    </p>
                </div>
                
                <div class="legal-disclaimer-section">
                    <h2 class="disclaimer-heading">Campbell <span class="v-red">v.</span> Acuff-Rose Music, Inc. (1994)</h2>
                    <p class="disclaimer-subtext">
                        Like Oskar Schindler's list, this archive preserves what must not be forgotten‚Äîeach case a name, 
                        each judgment a life touched by the scales of justice. In transforming raw legal text into 
                        accessible knowledge, we honor the doctrine of fair use, ensuring that the lessons of the past 
                        illuminate the path forward. One case saved is a world saved; one judgment understood is justice 
                        preserved for all.
                    </p>
                </div>
            </div>
        </div>
    </div>


    <script src="theme.js"></script>
    <script src="analytics-tracker.js"></script>
    <script src="device-detector.js"></script>
    <script>
        // Device detection
        function displayDeviceInfo() {
            const deviceInfo = window.DeviceDetector ? window.DeviceDetector.deviceInfo : null;
            const deviceIconEl = document.getElementById('device-icon');
            const deviceNameEl = document.getElementById('device-name');
            
            if (deviceInfo) {
                deviceIconEl.textContent = deviceInfo.deviceIcon;
                deviceNameEl.textContent = deviceInfo.deviceName;
            } else {
                // Fallback if DeviceDetector is not available
                deviceIconEl.textContent = 'üñ•Ô∏è';
                deviceNameEl.textContent = 'Desktop';
            }
        }

        // Load analytics data from tracker
        function loadAnalytics() {
            const analytics = window.AnalyticsTracker ? window.AnalyticsTracker.getAnalyticsData() : null;
            
            if (analytics) {
                // Display real data from analytics tracker
                document.getElementById('today-visitors').textContent = analytics.todayVisitors;
                document.getElementById('yesterday-visitors').textContent = analytics.yesterdayVisitors;
                document.getElementById('month-visitors').textContent = analytics.monthVisitors;
                
                // Display last month visitors (or show N/A if 0)
                const lastMonthElement = document.getElementById('last-month-visitors');
                if (analytics.lastMonthVisitors > 0) {
                    lastMonthElement.textContent = analytics.lastMonthVisitors;
                } else {
                    lastMonthElement.textContent = '0';
                    const lastMonthCard = lastMonthElement.closest('.metric-card');
                    if (lastMonthCard) {
                        lastMonthCard.style.opacity = '0.7';
                        const label = lastMonthCard.querySelector('.metric-label');
                        if (label) {
                            label.textContent = 'Last Month (No data yet)';
                        }
                    }
                }
                
                // New visitors indicator
                const isNew = window.AnalyticsTracker.isNewVisitor();
                document.getElementById('new-visitors').textContent = isNew ? '1 (You!)' : '0';
            } else {
                // Fallback values if tracker is not available
                document.getElementById('today-visitors').textContent = '1';
                document.getElementById('yesterday-visitors').textContent = '0';
                document.getElementById('month-visitors').textContent = '1';
                document.getElementById('last-month-visitors').textContent = '0';
                document.getElementById('new-visitors').textContent = '1';
            }
        }

        // Star rating system
        const stars = document.querySelectorAll('.star');
        const ratingMessage = document.getElementById('rating-message');
        let currentRating = 0;

        stars.forEach(star => {
            star.addEventListener('mouseenter', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                highlightStars(rating);
            });

            star.addEventListener('click', function() {
                currentRating = parseInt(this.getAttribute('data-rating'));
                highlightStars(currentRating);
                this.classList.add('active');
                
                // Show thank you message
                const messages = [
                    "Thank you for your feedback! üíô",
                    "We appreciate your input! üíô",
                    "Thanks for rating us! üíô",
                    "Your feedback matters! üíô",
                    "Wonderful! Thank you! üíô"
                ];
                ratingMessage.textContent = messages[currentRating - 1] || messages[4];
                
                // Save rating to localStorage
                localStorage.setItem('user_rating', currentRating);
                localStorage.setItem('rating_date', new Date().toISOString());
                console.log('User rated:', currentRating, 'stars');
            });
        });

        document.querySelector('.stars-container').addEventListener('mouseleave', function() {
            if (currentRating === 0) {
                highlightStars(0);
            } else {
                highlightStars(currentRating);
            }
        });

        function highlightStars(rating) {
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Load saved rating if available
        function loadSavedRating() {
            const savedRating = localStorage.getItem('user_rating');
            if (savedRating) {
                currentRating = parseInt(savedRating);
                highlightStars(currentRating);
                ratingMessage.textContent = 'Your previous rating';
            }
        }

        // Initialize
        displayDeviceInfo();
        loadAnalytics();
        loadSavedRating();
    </script>
    <script src="performance-optimizer.js"></script>
</body>
</html>
